{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/liaoruikang/Desktop/wangyiyun/miniprogram_music/pages/song/song.vue?45f3","webpack:///C:/Users/liaoruikang/Desktop/wangyiyun/miniprogram_music/pages/song/song.vue?336e","webpack:///C:/Users/liaoruikang/Desktop/wangyiyun/miniprogram_music/pages/song/song.vue?3b88","uni-app:///pages/song/song.vue","webpack:///C:/Users/liaoruikang/Desktop/wangyiyun/miniprogram_music/pages/song/song.vue?41e5","webpack:///C:/Users/liaoruikang/Desktop/wangyiyun/miniprogram_music/pages/song/song.vue?63e5"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"pages/song/song.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/song/song.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./song.vue?vue&type=template&id=278debb4&\"\nvar renderjs\nimport script from \"./song.vue?vue&type=script&lang=js&\"\nexport * from \"./song.vue?vue&type=script&lang=js&\"\nimport style0 from \"./song.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/song/song.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./song.vue?vue&type=template&id=278debb4&\"","var components\ntry {\n  components = {\n    navigationBar: function() {\n      return import(\n        /* webpackChunkName: \"components/navigationBar/navigationBar\" */ \"@/components/navigationBar/navigationBar.vue\"\n      )\n    },\n    uniIcons: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    simiSong: function() {\n      return import(\n        /* webpackChunkName: \"components/simiSong/simiSong\" */ \"@/components/simiSong/simiSong.vue\"\n      )\n    },\n    comment: function() {\n      return import(\n        /* webpackChunkName: \"components/comment/comment\" */ \"@/components/comment/comment.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.imgLoad = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.isPlay ? _vm.pause() : _vm.play()\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./song.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./song.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<navigationBar\r\n\t\t\tmenuBackground=\"#00000030\"\r\n\t\t\tlineColor=\"#fff\"\r\n\t\t\tcolor=\"#fff\"\r\n\t\t\ttitleColor=\"#fff\"\r\n\t\t\t:title=\"currentPlay.name ? currentPlay.name : '歌曲详情'\"\r\n\t\t\t:background=\"background\"\r\n\t\t\t:mask=\"mask\"\r\n\t\t\tbackgroundSize=\"cover\"\r\n\t\t\tbackdropFilter=\"blur(20px)\"\r\n\t\t></navigationBar>\r\n\t\t<scroll-view\r\n\t\t\tscroll-y\r\n\t\t\tclass=\"song_box\"\r\n\t\t\t:style=\"{\r\n\t\t\t\theight: systemInfo.windowHeight - navigatorBarAndStatusBarHeight + 'px',\r\n\t\t\t\tbackground:\r\n\t\t\t\t\tbackground + (' center ' + -navigatorBarAndStatusBarHeight + 'px'),\r\n\t\t\t\tbackgroundSize: `cover`\r\n\t\t\t}\"\r\n\t\t>\r\n\t\t\t<view class=\"main\">\r\n\t\t\t\t<view class=\"pic\">\r\n\t\t\t\t\t<view class=\"needle\"></view>\r\n\t\t\t\t\t<view class=\"vinyl\">\r\n\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t:style=\"{ animationPlayState: rotate }\"\r\n\t\t\t\t\t\t\t:src=\"currentPlay.al && currentPlay.al.picUrl\"\r\n\t\t\t\t\t\t\t@load=\"imgLoad = true\"\r\n\t\t\t\t\t\t></image>\r\n\t\t\t\t\t\t<view class=\"vinyl_img\"></view>\r\n\t\t\t\t\t\t<uni-icons\r\n\t\t\t\t\t\t\tcustomPrefix=\"icomoon\"\r\n\t\t\t\t\t\t\t:type=\"playIconType\"\r\n\t\t\t\t\t\t\tclass=\"play\"\r\n\t\t\t\t\t\t\tsize=\"80rpx\"\r\n\t\t\t\t\t\t\tcolor=\"#fff\"\r\n\t\t\t\t\t\t\t@click=\"isPlay ? pause() : play()\"\r\n\t\t\t\t\t\t></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"lyric\">\r\n\t\t\t\t\t<view class=\"lyric_centent\" :style=\"{ top: -offsetTop + 'px' }\">\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t:class=\"['txt', active === index ? 'active' : '']\"\r\n\t\t\t\t\t\t\tv-for=\"(item, index) in lyric\"\r\n\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{{ item.centent }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button class=\"share\" open-type=\"share\">\r\n\t\t\t\t\t<text>分享给微信好友</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"main_sum\">\r\n\t\t\t\t\t<!-- 喜欢这首歌的五个用户 -->\r\n\t\t\t\t\t<simiSong :songId=\"id\" @change=\"simiSongChange\"></simiSong>\r\n\t\t\t\t\t<!-- 精彩评论 -->\r\n\t\t\t\t\t<comment :songId=\"id\"></comment>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport { getSongDetailApi, getSongUrlApi, getLyricApi } from '@/api/index.js'\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnavigatorBarAndStatusBarHeight:\r\n\t\t\t\tuni.getStorageSync('navigationBarHeight') +\r\n\t\t\t\tuni.getStorageSync('statusBarHeight'),\r\n\t\t\tisPlay: false,\r\n\t\t\timgLoad: false,\r\n\t\t\taudio: {},\r\n\t\t\tsrc: '',\r\n\t\t\tlrc: '',\r\n\t\t\toffsetTop: 0,\r\n\t\t\tactive: 0,\r\n\t\t\tid: '',\r\n\t\t\tisInit: false\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState(['systemInfo', 'currentPlay', 'songlist']),\r\n\t\tbackground() {\r\n\t\t\tif (JSON.stringify(this.currentPlay) === '{}') return ''\r\n\t\t\treturn `url('${this.currentPlay.al.picUrl}?param=320y720')`\r\n\t\t},\r\n\t\tmask() {\r\n\t\t\tif (!this.src || !this.imgLoad) return `#0B0C12`\r\n\t\t\treturn `#00000070`\r\n\t\t},\r\n\t\trotate() {\r\n\t\t\tif (!this.isPlay) return 'paused'\r\n\t\t\treturn 'running'\r\n\t\t},\r\n\t\tsinger() {\r\n\t\t\tif (JSON.stringify(this.currentPlay) === '{}') return '无'\r\n\t\t\tlet ar = ''\r\n\t\t\tthis.currentPlay.ar.forEach(item => {\r\n\t\t\t\tar += item.name + '/'\r\n\t\t\t})\r\n\t\t\tar = ar.substr(0, ar.length - 1)\r\n\t\t\treturn ar\r\n\t\t},\r\n\t\tplayIconType() {\r\n\t\t\tif (!this.isPlay) return 'icon-play'\r\n\t\t\treturn 'icon-pause'\r\n\t\t},\r\n\t\tlyric() {\r\n\t\t\tif (!this.lrc) return []\r\n\t\t\tlet arr = this.lrc.split(/\\n/)\r\n\t\t\tarr.forEach((item, index) => {\r\n\t\t\t\t// 处理时间\r\n\t\t\t\tlet time = item.match(/\\[[\\S]+\\]/g)\r\n\t\t\t\ttime = time\r\n\t\t\t\t\t? time[0].substr(1, time[0].length - 2).split(':')\r\n\t\t\t\t\t: [1000, 1000]\r\n\t\t\t\tconst m = Number(time[0]) * 60\r\n\t\t\t\tconst s = Number(time[1])\r\n\t\t\t\ttime = m + s\r\n\t\t\t\t// 处理歌词\r\n\t\t\t\tlet centent = item.split(/\\]/)[1]\r\n\t\t\t\tif (typeof centent === 'string') {\r\n\t\t\t\t\tcentent = centent.trim()\r\n\t\t\t\t}\r\n\t\t\t\tif (time === 61000) {\r\n\t\t\t\t\tarr.splice(index, 1)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tarr[index] = {\r\n\t\t\t\t\t\ttime,\r\n\t\t\t\t\t\tcentent\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tarr = arr.filter(item => item.centent)\r\n\t\t\tarr.push({\r\n\t\t\t\ttime: arr[arr.length - 1].time + 3,\r\n\t\t\t\tcentent: ''\r\n\t\t\t})\r\n\t\t\treturn arr\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations(['updateCurrentPlay']),\r\n\t\t// 获取歌曲详情\r\n\t\tasync getSongDetail(id) {\r\n\t\t\tconst { data: result } = await getSongDetailApi(id)\r\n\t\t\tif (result.code !== 200) return uni.$showMsg('加载失败')\r\n\t\t\tthis.updateCurrentPlay(result.songs[0])\r\n\t\t\tthis.getSongUrl(id)\r\n\t\t},\r\n\t\t// 获取歌曲url\r\n\t\tasync getSongUrl(id) {\r\n\t\t\tconst { data: result } = await getSongUrlApi(id)\r\n\t\t\tif (result.code !== 200) return uni.$showMsg('加载失败')\r\n\t\t\tthis.src = result.data[0].url\r\n\t\t\tthis.initAudio(\r\n\t\t\t\tthis.currentPlay.name,\r\n\t\t\t\tthis.singer,\r\n\t\t\t\tthis.currentPlay.al.picUrl,\r\n\t\t\t\tthis.src\r\n\t\t\t)\r\n\t\t},\r\n\t\t// 获取歌曲歌词\r\n\t\tasync getLyric(id) {\r\n\t\t\tconst { data: result } = await getLyricApi(id)\r\n\t\t\tif (result.code !== 200) return uni.$showMsg('加载失败')\r\n\t\t\tthis.lrc = result.lrc.lyric\r\n\t\t},\r\n\t\tinitAudio(title, singer, coverImgUrl, src, stop) {\r\n\t\t\tif (title === this.audio.title) return (this.isPlay = true)\r\n\t\t\tthis.audio.title = title\r\n\t\t\tthis.audio.singer = singer\r\n\t\t\tthis.audio.coverImgUrl = coverImgUrl\r\n\t\t\tthis.audio.src = src\r\n\t\t\tthis.isPlay = true\r\n\t\t\tthis.isInit = true\r\n\t\t},\r\n\t\t// 自然播放结束\r\n\t\tonEnded() {\r\n\t\t\tthis.isPlay = false\r\n\t\t\tconst [currentSong] = this.songlist.filter(\r\n\t\t\t\titem => item.id === this.currentPlay.id\r\n\t\t\t)\r\n\t\t\tconst index = this.songlist.indexOf(currentSong)\r\n\t\t\tif (index === -1 || !this.songlist[index + 1]) return\r\n\t\t\tthis.id = this.songlist[index + 1].id\r\n\t\t},\r\n\t\t// 播放监听\r\n\t\tonPlay() {\r\n\t\t\tthis.isPlay = true\r\n\t\t},\r\n\t\t// 暂停监听\r\n\t\tonPause() {\r\n\t\t\tthis.isPlay = false\r\n\t\t},\r\n\t\t// 播放进度更新\r\n\t\tonTimeUpdate() {\r\n\t\t\tconst query = uni.createSelectorQuery()\r\n\t\t\tquery.select('.txt').boundingClientRect()\r\n\t\t\tquery.exec(res => {\r\n\t\t\t\tif (!res[0]) return\r\n\t\t\t\tconst height = res[0].height\r\n\t\t\t\tconst currentTime = this.audio.currentTime\r\n\t\t\t\tconst [currentLyric] = this.lyric.filter((item, index) => {\r\n\t\t\t\t\tif (this.lyric[index + 1]) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tcurrentTime >= item.time &&\r\n\t\t\t\t\t\t\tcurrentTime < this.lyric[index + 1].time\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn item\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet index = this.lyric.indexOf(currentLyric)\r\n\t\t\t\tthis.active = index\r\n\t\t\t\tif (index <= 1) return (this.offsetTop = 0 * height)\r\n\t\t\t\tif (index >= this.lyric.length - 4)\r\n\t\t\t\t\treturn (this.offsetTop = (this.lyric.length - 4) * height)\r\n\t\t\t\tthis.offsetTop = (index - 1) * height\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 播放\r\n\t\tplay() {\r\n\t\t\tif (!this.isInit) {\r\n\t\t\t\tthis.initAudio(\r\n\t\t\t\t\tthis.currentPlay.name,\r\n\t\t\t\t\tthis.singer,\r\n\t\t\t\t\tthis.currentPlay.al.picUrl,\r\n\t\t\t\t\tthis.src\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tthis.audio.play()\r\n\t\t},\r\n\t\t// 暂停\r\n\t\tpause() {\r\n\t\t\tthis.audio.pause()\r\n\t\t},\r\n\t\tonStop() {\r\n\t\t\tthis.isPlay = false\r\n\t\t\tthis.isInit = false\r\n\t\t},\r\n\t\tonerror() {\r\n\t\t\tconsole.log('播放错误')\r\n\t\t},\r\n\t\tsimiSongChange(e) {\r\n\t\t\tthis.id = e.id\r\n\t\t}\r\n\t},\r\n\tonLoad(options) {\r\n\t\tthis.id = options.id\r\n\t},\r\n\tcreated() {\r\n\t\tthis.audio = uni.getBackgroundAudioManager()\r\n\t\tthis.audio.onPlay(this.onPlay)\r\n\t\tthis.audio.onPause(this.onPause)\r\n\t\tthis.audio.onEnded(this.onEnded)\r\n\t\tthis.audio.onTimeUpdate(this.onTimeUpdate)\r\n\t\tthis.audio.onStop(this.onStop)\r\n\t\tthis.audio.onError(this.onerror)\r\n\t},\r\n\twatch: {\r\n\t\tid(val) {\r\n\t\t\tthis.getLyric(val)\r\n\t\t\tthis.getSongDetail(val)\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.song_box {\r\n\tposition: relative;\r\n\tbackground-repeat: no-repeat !important;\r\n\r\n\t.main {\r\n\t\tposition: relative;\r\n\t\tz-index: 999;\r\n\t\t.pic {\r\n\t\t\tpadding-top: 240rpx;\r\n\t\t\t.needle {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttransform: translateX(-40rpx);\r\n\t\t\t\theight: 400rpx;\r\n\t\t\t\twidth: 240rpx;\r\n\t\t\t\tbackground: url('@/static/images/needle.png') no-repeat;\r\n\t\t\t\tbackground-size: 100% 100%;\r\n\t\t\t\tz-index: 1;\r\n\t\t\t}\r\n\t\t\t.vinyl {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tmargin: 0 auto;\r\n\t\t\t\theight: 620rpx;\r\n\t\t\t\twidth: 620rpx;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\t.vinyl_img {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\ttop: 0;\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tbackground: url('@/static/images/vinyl.png') no-repeat;\r\n\t\t\t\t\tbackground-size: 100% 100%;\r\n\t\t\t\t}\r\n\t\t\t\t.play {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\ttop: 50%;\r\n\t\t\t\t\tleft: 50%;\r\n\t\t\t\t\twidth: 110rpx;\r\n\t\t\t\t\theight: 110rpx;\r\n\t\t\t\t\tmargin-top: -55rpx;\r\n\t\t\t\t\tmargin-left: -55rpx;\r\n\t\t\t\t\tbackground-color: #00000070;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tline-height: 110rpx;\r\n\t\t\t\t}\r\n\t\t\t\timage {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\ttop: 50%;\r\n\t\t\t\t\tleft: 50%;\r\n\t\t\t\t\tmargin: -210rpx 0 0 -210rpx;\r\n\t\t\t\t\twidth: 420rpx;\r\n\t\t\t\t\theight: 420rpx;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tanimation: rotate 30s linear infinite;\r\n\t\t\t\t}\r\n\t\t\t\t@keyframes rotate {\r\n\t\t\t\t\t100% {\r\n\t\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.lyric {\r\n\t\t\theight: 240rpx;\r\n\t\t\ttext-align: center;\r\n\t\t\toverflow: hidden;\r\n\t\t\tline-height: 80rpx;\r\n\t\t\tmargin: 40rpx 0;\r\n\t\t\t.lyric_centent {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\ttransition: all 0.5s;\r\n\t\t\t\t.txt {\r\n\t\t\t\t\tcolor: #cccccc50;\r\n\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.active {\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.share {\r\n\t\t\twidth: 360rpx;\r\n\t\t\theight: 80rpx;\r\n\t\t\tmargin: 50rpx auto;\r\n\t\t\tmargin-bottom: 100rpx;\r\n\t\t\tborder: 2rpx solid rgba(255, 255, 255, 0.7);\r\n\t\t\tbackground-color: transparent;\r\n\t\t\tline-height: 80rpx;\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tborder-radius: 50rpx;\r\n\t\t}\r\n\t\t.main_sum {\r\n\t\t\tpadding: 0 34rpx;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\n","import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./song.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./song.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1654791346183\n      var cssReload = require(\"F:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}